

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Logging Examples &mdash; ackward v0.2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ackward v0.2 documentation" href="index.html" />
    <link rel="prev" title="Welcome to ackward’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="Welcome to ackward’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ackward v0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="logging-examples">
<h1>Logging Examples<a class="headerlink" href="#logging-examples" title="Permalink to this headline">¶</a></h1>
<p><tt class="docutils literal"><span class="pre">ackward.logging</span></tt> is a C++ interface atop Python&#8217;s standard <tt class="docutils literal"><span class="pre">logging</span></tt>
module. In general, you use <tt class="docutils literal"><span class="pre">ackward.logging</span></tt> just as you would use
the Python module. The function and class names have been kept as
close as possible to Python&#8217;s to avoid forcing users to remember two
APIs.</p>
<div class="section" id="embedded">
<h2>Embedded<a class="headerlink" href="#embedded" title="Permalink to this headline">¶</a></h2>
<p>This example shows typical use of ackward::logging embedded in a C++
program.</p>
<div class="highlight-c++"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;ackward/logging/Initialize.hpp&gt;                </span><span class="c1">// 1</span>
<span class="cp">#include &lt;ackward/logging/Logger.hpp&gt;                    </span><span class="c1">// 2</span>
<span class="cp">#include &lt;ackward/logging/Module.hpp&gt;                    </span><span class="c1">// 3</span>

<span class="k">namespace</span> <span class="n">al</span><span class="o">=</span><span class="n">ackward</span><span class="o">::</span><span class="n">logging</span><span class="p">;</span>
<span class="k">namespace</span> <span class="n">bp</span><span class="o">=</span><span class="n">boost</span><span class="o">::</span><span class="n">python</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Py_Initialize</span><span class="p">();</span>                                     <span class="c1">// 4</span>
    <span class="n">al</span><span class="o">::</span><span class="n">initialize</span><span class="p">();</span>                                    <span class="c1">// 5</span>
    
    <span class="n">al</span><span class="o">::</span><span class="n">basicConfig</span><span class="p">();</span>                                   <span class="c1">// 6</span>

    <span class="c1">// Create a logger</span>
    <span class="n">al</span><span class="o">::</span><span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">al</span><span class="o">::</span><span class="n">getLogger</span><span class="p">(</span><span class="s">L&quot;log_example&quot;</span><span class="p">);</span>   <span class="c1">// 7</span>
    <span class="n">logger</span><span class="p">.</span><span class="n">critical</span><span class="p">(</span><span class="s">L&quot;The widget is broken!&quot;</span><span class="p">);</span>           <span class="c1">// 8</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>This is what&#8217;s going on:</p>
<blockquote>
<ol class="arabic simple">
<li>Include the header for initializing the library. You must call
<tt class="docutils literal"><span class="pre">ackward::logging::initialize()</span></tt> before using any other parts of the
library.</li>
<li>Include the header for the <tt class="docutils literal"><span class="pre">Logger</span></tt> class.</li>
<li>Include the header with module-level functions.</li>
<li>Make sure <tt class="docutils literal"><span class="pre">Py_Initialize()</span></tt> is called before using <tt class="docutils literal"><span class="pre">ackward</span></tt>.</li>
<li>Initialize <tt class="docutils literal"><span class="pre">ackward::logging</span></tt>. You must call this before using other
parts of the library.</li>
<li><tt class="docutils literal"><span class="pre">ackward::logging::basicConfig()</span></tt> calls the standard
<tt class="docutils literal"><span class="pre">logging.basicConfig()</span></tt> method in Python.</li>
<li>Create a <tt class="docutils literal"><span class="pre">Logger</span></tt> object. These are the objects to which you pass
log messages.</li>
<li>Log a message at the critical severity level.</li>
</ol>
</blockquote>
</div>
<div class="section" id="extension-module">
<h2>Extension module<a class="headerlink" href="#extension-module" title="Permalink to this headline">¶</a></h2>
<p>This example shows the use of <tt class="docutils literal"><span class="pre">ackward::logging</span></tt> in a C++ extension
module (i.e. a Python module written in C++.) This first bit of code
implements the extension module itself.</p>
<div class="highlight-c++"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;string&gt;</span>

<span class="cp">#include &lt;boost/python.hpp&gt;</span>

<span class="cp">#include &lt;ackward/logging/Logger.hpp&gt;       </span><span class="c1">// 1</span>

<span class="k">namespace</span> <span class="n">bp</span><span class="o">=</span><span class="n">boost</span><span class="o">::</span><span class="n">python</span><span class="p">;</span>

<span class="k">namespace</span>
<span class="p">{</span>

<span class="kt">void</span> <span class="n">log_message</span><span class="p">(</span><span class="n">bp</span><span class="o">::</span><span class="n">object</span> <span class="n">logger</span><span class="p">,</span>         <span class="c1">// 2 </span>
                 <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">wstring</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ackward</span><span class="o">::</span><span class="n">logging</span><span class="o">::</span><span class="n">Logger</span> <span class="n">l</span><span class="p">(</span><span class="n">logger</span><span class="p">);</span>     <span class="c1">// 3</span>
    <span class="n">l</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>                           <span class="c1">// 4</span>
<span class="p">}</span>

<span class="p">}</span>

<span class="n">BOOST_PYTHON_MODULE</span><span class="p">(</span><span class="n">log_test</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">bp</span><span class="o">::</span><span class="n">def</span><span class="p">(</span><span class="s">&quot;log_message&quot;</span><span class="p">,</span> <span class="o">::</span><span class="n">log_message</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Here&#8217;s what&#8217;s going on in this case:</p>
<blockquote>
<ol class="arabic simple">
<li>Include the header for the Logger class.</li>
<li>A Python <tt class="docutils literal"><span class="pre">logging.Logger</span></tt> object is passed in as a
<tt class="docutils literal"><span class="pre">boost::python::object</span></tt> via the extension&#8217;s API.</li>
<li>This &#8220;wraps&#8221; the Python logger in a C++-level
<tt class="docutils literal"><span class="pre">ackward::logging::Logger</span></tt> instance.</li>
<li>This logs the message at the error severity level.</li>
</ol>
</blockquote>
<p>This second bit of code just shows a basic use of the extension. This
is really just included for completeness; there&#8217;s nothing special
going on here.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">log_test</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
<span class="n">log_test</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="s">&quot;This gets logged by the C++ extension module.&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Logging Examples</a><ul>
<li><a class="reference internal" href="#embedded">Embedded</a></li>
<li><a class="reference internal" href="#extension-module">Extension module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to ackward&#8217;s documentation!</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/logging_example_embedding.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="Welcome to ackward’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">ackward v0.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Austin Bingham.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
  </body>
</html>